<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<meta name="description" content="LockedIn - Complete study productivity platform with video calls, flashcards, notes, focus tracking"/>
<title>LockedIn ‚Äî Study Smarter Together</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîê</text></svg>">
<script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.5.0/peerjs.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--cream:#f7f3ee;--cream-dark:#efe9df;--green-deep:#2d4a2e;--green-mid:#4a7c4f;--green-light:#7ab67a;--green-pale:#c8e6c8;--green-wash:#e8f5e8;--terracotta:#c4714a;--gold:#d4a843;--text-dark:#2c2420;--text-mid:#5c4a3a;--text-light:#8a7a6a;--shadow:0 2px 24px rgba(45,74,46,0.08);--shadow-md:0 6px 32px rgba(45,74,46,0.12);--radius:16px;--radius-sm:10px;--radius-pill:30px}
html{scroll-behavior:smooth}
body{font-family:'Outfit',sans-serif;background:var(--cream);color:var(--text-dark);min-height:100vh;overflow-x:hidden;-webkit-font-smoothing:antialiased}
.page-bg{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
.leaf-d{position:absolute;opacity:.035}
.leaf-d.l1{top:-80px;right:-100px;width:380px;transform:rotate(12deg)}
.leaf-d.l2{bottom:-60px;left:-120px;width:320px;transform:rotate(-18deg)}
.leaf-d.l3{top:55%;left:-70px;width:220px;transform:rotate(40deg);opacity:.025}
.topbar{position:sticky;top:0;z-index:100;background:rgba(247,243,238,.95);backdrop-filter:blur(18px);border-bottom:1px solid rgba(45,74,46,.07);padding:0 28px;height:64px;display:flex;align-items:center;justify-content:space-between}
.logo-wrap{display:flex;align-items:center;gap:12px;text-decoration:none;transition:transform .2s}
.logo-wrap:hover{transform:scale(1.02)}
.logo-svg{width:42px;height:42px;filter:drop-shadow(0 2px 4px rgba(45,74,46,.15))}
.logo-text{font-family:'DM Serif Display',serif;font-size:24px;color:var(--green-deep);letter-spacing:-.5px}
.logo-text span{color:var(--terracotta)}
.nav-tabs{display:flex;gap:2px;background:var(--cream-dark);border-radius:var(--radius-pill);padding:3px;overflow-x:auto;max-width:calc(100% - 250px);scrollbar-width:none}
.nav-tabs::-webkit-scrollbar{display:none}
.nav-tab{padding:7px 14px;border-radius:var(--radius-pill);border:none;background:transparent;font-size:11.5px;font-weight:500;color:var(--text-light);cursor:pointer;transition:all .25s;white-space:nowrap;display:flex;align-items:center;gap:4px;flex-shrink:0}
.nav-tab:hover{color:var(--green-deep);background:rgba(255,255,255,.5)}
.nav-tab.active{background:#fff;color:var(--green-deep);box-shadow:0 1px 8px rgba(0,0,0,.08);font-weight:600}
.nav-tab .ti{font-size:13px}
.topbar-right{display:flex;align-items:center;gap:10px;flex-shrink:0}
.coffee-btn{display:flex;align-items:center;gap:6px;padding:7px 16px;border-radius:var(--radius-pill);background:linear-gradient(135deg,var(--terracotta),#e04a1a);color:#fff;border:none;font-size:11.5px;font-weight:600;cursor:pointer;transition:all .2s;box-shadow:0 2px 10px rgba(196,113,74,.3)}
.coffee-btn:hover{transform:translateY(-1px);box-shadow:0 4px 14px rgba(196,113,74,.4)}
.main{position:relative;z-index:1;max-width:1100px;margin:0 auto;padding:28px 24px 70px}
.section{display:none;animation:sIn .4s ease}
.section.active{display:block}
@keyframes sIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.page-head{margin-bottom:20px;display:flex;justify-content:space-between;align-items:flex-end;flex-wrap:wrap;gap:10px}
.page-head h1{font-family:'DM Serif Display',serif;font-size:28px;color:var(--green-deep);font-weight:400;letter-spacing:-.7px}
.page-head p{color:var(--text-light);font-size:12.5px;margin-top:3px}
.card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);border:1px solid rgba(45,74,46,.06);padding:20px;transition:all .3s}
.card:hover{box-shadow:var(--shadow-md)}
.card-sm{padding:14px 18px}
.btn{display:inline-flex;align-items:center;gap:6px;padding:9px 20px;border-radius:var(--radius-pill);border:none;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;white-space:nowrap}
.btn-green{background:var(--green-deep);color:#fff;box-shadow:0 2px 12px rgba(45,74,46,.25)}
.btn-green:hover{background:#1f3a20;transform:translateY(-1px)}
.btn-outline{background:transparent;color:var(--green-deep);border:1.5px solid var(--green-pale)}
.btn-outline:hover{border-color:var(--green-mid);background:var(--green-wash)}
.btn-terra{background:var(--terracotta);color:#fff;box-shadow:0 2px 10px rgba(196,113,74,.3)}
.btn-terra:hover{transform:translateY(-1px)}
.btn-sm{padding:6px 14px;font-size:11.5px}
.btn-danger{background:transparent;color:var(--terracotta);border:1.5px solid rgba(196,113,74,.25)}
.btn-danger:hover{background:rgba(196,113,74,.1)}
.inp{width:100%;padding:10px 14px;border-radius:var(--radius-sm);border:1.5px solid var(--cream-dark);background:#fff;font-size:13px;color:var(--text-dark);outline:none;transition:all .2s}
.inp:focus{border-color:var(--green-mid);box-shadow:0 0 0 3px rgba(74,124,79,.1)}
.inp::placeholder{color:var(--text-light)}
select.inp{appearance:none;cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L5 5L9 1' stroke='%238a7a6a' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;padding-right:32px}
textarea.inp{resize:vertical;min-height:100px;font-family:inherit}
input[type=range]{-webkit-appearance:none;width:100%;height:5px;border-radius:3px;background:var(--cream-dark);outline:none}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:var(--green-deep);cursor:pointer;box-shadow:0 2px 6px rgba(45,74,46,.3)}
.flex{display:flex;align-items:center}
.flex-between{display:flex;justify-content:space-between;align-items:center}
.gap-6{gap:6px}.gap-8{gap:8px}.gap-12{gap:12px}
.mt-6{margin-top:6px}.mt-8{margin-top:8px}.mt-12{margin-top:12px}.mt-16{margin-top:16px}
.mb-6{margin-bottom:6px}.mb-8{margin-bottom:8px}.mb-12{margin-bottom:12px}
.text-light{color:var(--text-light)}.text-mid{color:var(--text-mid)}
.text-sm{font-size:12px}.text-xs{font-size:11px}
.fw6{font-weight:600}.hidden{display:none!important}
::-webkit-scrollbar{width:5px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--green-pale);border-radius:3px}
.jitsi-frame{width:100%;height:600px;border:none;border-radius:var(--radius);box-shadow:var(--shadow-md);background:#1a1a1a}
.room-code-banner{text-align:center;padding:16px;background:linear-gradient(135deg,var(--green-deep),#3d5e3e);border-radius:var(--radius);margin-bottom:14px;color:#fff}
.room-code-banner .rcb-code{font-family:'DM Serif Display',serif;font-size:24px;letter-spacing:3px;display:flex;align-items:center;justify-content:center;gap:10px}
.room-code-banner button{background:rgba(255,255,255,.2);border:none;cursor:pointer;color:#fff;font-size:20px;padding:6px 12px;border-radius:8px;transition:all .2s}
.room-code-banner button:hover{background:rgba(255,255,255,.3)}
.chat-layout{display:grid;grid-template-columns:1fr 290px;gap:14px}
.chat-area{min-height:350px;max-height:450px;overflow-y:auto;display:flex;flex-direction:column;gap:8px;padding:16px;background:#fff;border:1.5px solid var(--cream-dark);border-radius:var(--radius)}
.msg{display:flex;gap:8px;animation:msgSlide .3s ease}
@keyframes msgSlide{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.msg-av{width:28px;height:28px;border-radius:50%;font-size:14px;display:flex;align-items:center;justify-content:center;flex-shrink:0;background:var(--green-wash)}
.msg-bubble{background:var(--cream-dark);border-radius:10px 10px 10px 4px;padding:8px 12px;max-width:80%;font-size:12.5px;line-height:1.5}
.msg-bubble.mine{background:var(--green-wash);border-radius:10px 10px 4px 10px}
.msg .sender{font-size:10px;font-weight:600;color:var(--green-deep);margin-bottom:3px}
.msg .tm{font-size:9px;color:var(--text-light);margin-top:3px}
.chat-row{display:flex;gap:7px;margin-top:8px}
.chat-row .inp{border-radius:var(--radius-pill);padding:10px 18px}
.timer-card{text-align:center;padding:24px 18px;background:linear-gradient(145deg,#fff,var(--green-wash));border:2px solid var(--green-pale);border-radius:var(--radius);box-shadow:var(--shadow)}
.timer-display{font-family:'DM Serif Display',serif;font-size:48px;color:var(--green-deep);letter-spacing:-2px;margin:10px 0}
.timer-modes{display:flex;gap:4px;justify-content:center;margin:14px 0}
.timer-mode{padding:5px 12px;border-radius:var(--radius-pill);border:1.5px solid var(--cream-dark);background:#fff;font-size:10.5px;color:var(--text-light);cursor:pointer;transition:all .2s}
.timer-mode:hover,.timer-mode.active{border-color:var(--green-mid);color:var(--green-deep);background:var(--green-wash)}
.flash-layout{display:grid;grid-template-columns:220px 1fr;gap:14px}
.deck-list{display:flex;flex-direction:column;gap:5px;max-height:500px;overflow-y:auto}
.deck-item{padding:10px 13px;border-radius:10px;border:1.5px solid transparent;background:#fff;cursor:pointer;transition:all .2s;display:flex;justify-content:space-between;align-items:center;box-shadow:0 1px 3px rgba(0,0,0,.04)}
.deck-item:hover{border-color:var(--green-pale)}
.deck-item.active{border-color:var(--green-mid);background:var(--green-wash)}
.deck-name{font-size:13px;font-weight:600;color:var(--text-dark)}
.deck-count{font-size:10.5px;color:var(--text-light)}
.card-flip-scene{perspective:1200px;width:100%;max-width:420px;height:240px;margin:0 auto}
.card-flip{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform .6s;cursor:pointer}
.card-flip.flipped{transform:rotateY(180deg)}
.card-face{position:absolute;inset:0;backface-visibility:hidden;border-radius:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:28px;text-align:center}
.card-face.front{background:linear-gradient(145deg,#fff,var(--cream-dark));border:1.5px solid var(--green-pale);box-shadow:var(--shadow)}
.card-face.back{background:linear-gradient(145deg,var(--green-deep),#3d5e3e);transform:rotateY(180deg);box-shadow:var(--shadow)}
.card-face .lbl{font-size:10px;text-transform:uppercase;letter-spacing:1.2px;font-weight:600;margin-bottom:8px}
.card-face.front .lbl{color:var(--green-mid)}
.card-face.back .lbl{color:var(--green-pale)}
.card-face .cnt{font-family:'DM Serif Display',serif;font-size:19px;color:var(--text-dark)}
.card-face.back .cnt{color:#fff}
.mini-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:6px;margin-top:10px}
.mini-card{background:#fff;border:1.5px solid var(--cream-dark);border-radius:8px;padding:10px;position:relative;transition:border-color .2s}
.mini-card:hover{border-color:var(--green-pale)}
.mini-card .mq{font-size:9px;color:var(--text-light);text-transform:uppercase;margin-bottom:3px}
.mini-card .ma{color:var(--green-mid);font-weight:600;font-size:11.5px}
.quiz-opts{display:flex;flex-direction:column;gap:6px;max-width:420px;margin:16px auto 0}
.quiz-opt{padding:10px 14px;border-radius:10px;border:1.5px solid var(--cream-dark);background:#fff;cursor:pointer;font-size:12.5px;text-align:left;transition:all .2s}
.quiz-opt:hover{border-color:var(--green-mid);background:var(--green-wash)}
.quiz-opt.correct{border-color:var(--green-mid);background:var(--green-wash);color:var(--green-deep)}
.quiz-opt.wrong{border-color:var(--terracotta);background:rgba(196,113,74,.08);color:var(--terracotta)}
.notes-layout{display:grid;grid-template-columns:220px 1fr;gap:14px}
.note-item{padding:10px 13px;border-radius:8px;border:1.5px solid transparent;background:#fff;cursor:pointer;transition:all .2s;box-shadow:0 1px 3px rgba(0,0,0,.04)}
.note-item:hover{border-color:var(--green-pale)}
.note-item.active{border-color:var(--green-mid);background:var(--green-wash)}
.note-title{font-size:12px;font-weight:600;color:var(--text-dark);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.note-meta{font-size:10px;color:var(--text-light);margin-top:2px}
.note-editor{flex:1;display:flex;flex-direction:column;gap:10px}
.toolbar{display:flex;gap:3px;flex-wrap:wrap}
.toolbar button{width:30px;height:30px;border-radius:6px;border:1.5px solid var(--cream-dark);background:#fff;color:var(--text-mid);cursor:pointer;font-size:12px;display:flex;align-items:center;justify-content:center;transition:all .15s}
.toolbar button:hover{border-color:var(--green-mid);background:var(--green-wash)}
.note-body{flex:1;min-height:350px;background:#fff;border:1.5px solid var(--cream-dark);border-radius:var(--radius);padding:20px;outline:none;color:var(--text-dark);font-size:13px;line-height:1.8;overflow-y:auto}
.note-body:focus{border-color:var(--green-mid)}
.note-body:empty:before{content:attr(data-placeholder);color:var(--text-light)}
.expense-layout{display:grid;grid-template-columns:1fr 280px;gap:14px}
.exp-list{display:flex;flex-direction:column;gap:4px;max-height:320px;overflow-y:auto}
.exp-item{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-radius:8px;background:#fff;border:1.5px solid var(--cream-dark);transition:border-color .2s;font-size:12px}
.exp-item:hover{border-color:var(--green-pale)}
.exp-amt{font-weight:700;color:var(--terracotta)}
.exp-amt.inc{color:var(--green-mid)}
.stat-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}
.stat-box{background:#fff;border:1.5px solid var(--cream-dark);border-radius:10px;padding:10px;text-align:center}
.stat-val{font-family:'DM Serif Display',serif;font-size:18px}
.stat-lbl{font-size:9.5px;color:var(--text-light);margin-top:2px}
.bud-bar-bg{height:5px;background:var(--cream-dark);border-radius:3px;overflow:hidden;margin-top:5px}
.bud-bar-fill{height:100%;border-radius:3px;transition:width .4s}
.bud-bar-fill.ok{background:var(--green-mid)}
.bud-bar-fill.warn{background:var(--gold)}
.bud-bar-fill.danger{background:var(--terracotta)}
.dl-layout{display:grid;grid-template-columns:1fr 260px;gap:14px}
.dl-list{display:flex;flex-direction:column;gap:5px}
.dl-item{display:flex;justify-content:space-between;align-items:center;padding:11px 14px;border-radius:10px;background:#fff;border:1.5px solid var(--cream-dark);border-left:4px solid var(--green-mid);transition:all .2s}
.dl-item:hover{box-shadow:var(--shadow)}
.dl-item.urgent{border-left-color:var(--terracotta)}
.dl-item.warning{border-left-color:var(--gold)}
.dl-item.done{opacity:.5}
.dl-item.done .dl-title{text-decoration:line-through}
.dl-title{font-size:12.5px;font-weight:600;color:var(--text-dark)}
.dl-sub{font-size:10px;color:var(--text-light);margin-top:2px}
.dl-days{font-size:10px;font-weight:600;padding:2px 7px;border-radius:5px}
.dl-days.ok{background:var(--green-wash);color:var(--green-deep)}
.dl-days.warn{background:rgba(212,168,67,.1);color:var(--gold)}
.dl-days.urgent{background:rgba(196,113,74,.1);color:var(--terracotta)}
.pri-row{display:flex;gap:5px}
.pri-btn{flex:1;padding:6px 0;border-radius:6px;border:1.5px solid var(--cream-dark);background:#fff;color:var(--text-light);font-size:11px;font-weight:600;cursor:pointer;transition:all .2s;text-align:center}
.pri-btn:hover{border-color:var(--green-pale)}
.pri-btn.active.low{border-color:var(--green-mid);color:var(--green-deep);background:var(--green-wash)}
.pri-btn.active.med{border-color:var(--gold);color:var(--gold);background:rgba(212,168,67,.08)}
.pri-btn.active.hi{border-color:var(--terracotta);color:var(--terracotta);background:rgba(196,113,74,.08)}
.worry-layout{display:grid;grid-template-columns:1fr 270px;gap:14px}
.worry-tag{padding:5px 12px;border-radius:var(--radius-pill);border:1.5px solid var(--cream-dark);background:#fff;font-size:11px;color:var(--text-mid);cursor:pointer;transition:all .2s;display:inline-block;margin:3px}
.worry-tag.active{border-color:var(--terracotta);color:#fff;background:var(--terracotta)}
.worry-textarea{width:100%;min-height:130px;padding:14px;border-radius:10px;border:1.5px solid var(--cream-dark);background:var(--cream);font-size:13px;outline:none;resize:none;line-height:1.7}
.burn-btn{display:flex;align-items:center;gap:7px;padding:9px 22px;border-radius:var(--radius-pill);border:none;background:linear-gradient(135deg,var(--terracotta),#e04a1a);color:#fff;font-size:12.5px;font-weight:700;cursor:pointer;box-shadow:0 3px 12px rgba(196,113,74,.35)}
.burn-btn:hover{transform:translateY(-1px)}
.burn-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:499;display:none;backdrop-filter:blur(4px)}
.burn-backdrop.active{display:block}
.burn-overlay{position:fixed;inset:0;z-index:500;display:none;align-items:center;justify-content:center}
.burn-overlay.active{display:flex}
.burn-paper{position:relative;width:320px;max-width:90vw;min-height:160px;background:#fefcf8;border-radius:14px;padding:24px;box-shadow:0 8px 36px rgba(0,0,0,.25);transition:transform .2s}
.burn-paper.shaking{animation:shake .3s ease}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-4px) rotate(-1deg)}75%{transform:translateX(4px) rotate(1deg)}}
.burn-paper.burning{animation:paperBurn 2.2s ease forwards}
@keyframes paperBurn{0%{background:#fefcf8;transform:scale(1);opacity:1;border-radius:14px}10%{transform:scale(.98) rotate(-1deg)}20%{transform:scale(.96) rotate(1deg);background:#fff8f0}30%{background:#ffe8d0;box-shadow:0 8px 36px rgba(255,120,50,.4)}45%{background:#ffcc99;transform:scale(.92) rotate(-2deg);box-shadow:0 12px 48px rgba(255,80,20,.6)}60%{background:#ff8844;transform:scale(.82) rotate(2deg);box-shadow:0 16px 60px rgba(255,40,0,.8);border-radius:20px}75%{background:#ff4422;transform:scale(.65) rotate(-3deg);opacity:.8;border-radius:28px}85%{background:#dd2200;transform:scale(.45) rotate(4deg);opacity:.5;border-radius:40%}95%{background:#331100;transform:scale(.25) translateY(-30px);opacity:.15}100%{background:#000;transform:scale(.1) translateY(-60px);opacity:0;border-radius:50%}}
.burn-paper.burning .bp-text{animation:textFadeOut .8s ease forwards}
@keyframes textFadeOut{0%{opacity:1}50%{opacity:.3}100%{opacity:0}}
.fire-particle{position:absolute;width:8px;height:8px;border-radius:50%;pointer-events:none;opacity:0}
.fire-particle.active{animation:particleFly var(--dur) ease-out forwards}
@keyframes particleFly{0%{opacity:1;transform:translate(0,0) scale(1)}60%{opacity:.8}100%{opacity:0;transform:translate(var(--tx),var(--ty)) scale(0)}}
.ember{position:absolute;width:4px;height:4px;border-radius:50%;background:#ff6600;pointer-events:none;opacity:0;box-shadow:0 0 4px #ff9900}
.ember.active{animation:emberFloat var(--edur) ease-out forwards}
@keyframes emberFloat{0%{opacity:.9;transform:translate(0,0)}100%{opacity:0;transform:translate(var(--ex),var(--ey)) scale(.3)}}
.smoke{position:absolute;border-radius:50%;background:radial-gradient(circle,rgba(180,180,180,.5),transparent 70%);pointer-events:none;opacity:0}
.smoke.active{animation:smokeRise var(--sdur) ease-out forwards}
@keyframes smokeRise{0%{opacity:.5;transform:translate(-50%,-50%) scale(.3)}100%{opacity:0;transform:translate(-50%,-180%) scale(3)}}
.fire-glow{position:absolute;inset:-40px;border-radius:50%;background:radial-gradient(ellipse at center,rgba(255,100,20,.35),rgba(255,50,0,.15) 50%,transparent 80%);filter:blur(20px);opacity:0;pointer-events:none;z-index:-1}
.fire-glow.active{animation:glowPulse 1.2s ease-in-out}
@keyframes glowPulse{0%,100%{opacity:0}50%{opacity:1;transform:scale(1.1)}}
.ash-particle{position:absolute;width:3px;height:3px;border-radius:50%;background:#888;pointer-events:none;opacity:0}
.ash-particle.active{animation:ashFall var(--adur) ease-out forwards}
@keyframes ashFall{0%{opacity:.7;transform:translate(0,0) rotate(0deg)}100%{opacity:0;transform:translate(var(--ax),var(--ay)) rotate(var(--ar))}}
.burned-list{display:flex;flex-direction:column;gap:4px}
.burned-item{padding:8px 11px;border-radius:8px;background:#fff;border:1.5px solid var(--cream-dark);display:flex;justify-content:space-between;align-items:center;font-size:11px}
.burned-item .bi-text{color:var(--text-mid);max-width:140px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:line-through}
.fg-layout{display:grid;grid-template-columns:1fr 250px;gap:14px}
.fg-toggle{position:relative;width:46px;height:24px;cursor:pointer}
.fg-toggle input{opacity:0;width:0;height:0}
.fg-toggle .slider{position:absolute;inset:0;background:#ccc;border-radius:24px;transition:background .3s}
.fg-toggle .slider:before{content:'';position:absolute;width:18px;height:18px;left:3px;bottom:3px;background:#fff;border-radius:50%;transition:transform .3s}
.fg-toggle input:checked+.slider{background:var(--green-mid)}
.fg-toggle input:checked+.slider:before{transform:translateX(22px)}
.fg-alert{display:none;padding:10px 13px;border-radius:10px;border:1.5px solid rgba(196,113,74,.25);background:rgba(196,113,74,.07)}
.fg-alert.show{display:flex;align-items:center;gap:8px}
.fg-log{display:flex;flex-direction:column;gap:4px;max-height:260px;overflow-y:auto}
.fg-log-item{display:flex;align-items:center;gap:8px;padding:7px 10px;border-radius:8px;background:#fff;border:1.5px solid var(--cream-dark);font-size:11px}
.fg-log-item.warning{border-color:rgba(212,168,67,.3);background:rgba(212,168,67,.06)}
.fg-log-item.critical{border-color:rgba(196,113,74,.3);background:rgba(196,113,74,.06)}
.score-ring{position:relative;width:90px;height:90px;margin:0 auto}
.score-ring svg{transform:rotate(-90deg)}
.score-ring .sr-bg{fill:none;stroke:var(--cream-dark);stroke-width:7}
.score-ring .sr-fill{fill:none;stroke:var(--green-mid);stroke-width:7;stroke-linecap:round;transition:stroke-dashoffset .6s,stroke .4s}
.score-ring .sr-num{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-family:'DM Serif Display',serif;font-size:24px;color:var(--green-deep)}
.social-footer{margin-top:50px;padding:24px 0;border-top:2px solid var(--cream-dark);display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
.social-link{display:flex;align-items:center;gap:5px;padding:7px 14px;border-radius:var(--radius-pill);border:1.5px solid var(--cream-dark);background:#fff;color:var(--text-mid);font-size:11.5px;font-weight:500;text-decoration:none;transition:all .2s}
.social-link:hover{border-color:var(--green-mid);color:var(--green-deep);box-shadow:var(--shadow);transform:translateY(-2px)}
.toast{position:fixed;bottom:26px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--green-deep);color:#fff;padding:11px 26px;border-radius:var(--radius-pill);font-size:13px;font-weight:500;z-index:1000;transition:transform .4s;box-shadow:0 6px 18px rgba(0,0,0,.3);pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
.modal-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:600;align-items:center;justify-content:center;backdrop-filter:blur(4px)}
.modal-ov.open{display:flex}
.modal{background:#fff;border-radius:18px;padding:26px;width:90%;max-width:380px;box-shadow:0 12px 42px rgba(0,0,0,.15)}
.modal h3{font-family:'DM Serif Display',serif;font-size:19px;color:var(--green-deep);margin-bottom:12px}
.modal-acts{display:flex;justify-content:flex-end;gap:7px;margin-top:14px}
@media(max-width:860px){.flash-layout,.notes-layout,.chat-layout,.expense-layout,.dl-layout,.worry-layout,.fg-layout{grid-template-columns:1fr}.nav-tabs{max-width:calc(100% - 160px)}.jitsi-frame{height:400px}}
@media(max-width:580px){.main{padding:18px 12px 60px}.topbar{padding:0 12px;height:58px}.nav-tab span:not(.ti){display:none}.nav-tab{padding:7px 9px}.logo-text{font-size:20px}}
</style>
</head>
<body>

<div class="page-bg">
  <svg class="leaf-d l1" viewBox="0 0 200 300" fill="none"><path d="M100 0C60 40 10 80 10 160C10 240 60 280 100 300C140 280 190 240 190 160C190 80 140 40 100 0Z" fill="#2d4a2e"/></svg>
  <svg class="leaf-d l2" viewBox="0 0 200 300" fill="none"><path d="M100 0C60 40 10 80 10 160C10 240 60 280 100 300C140 280 190 240 190 160C190 80 140 40 100 0Z" fill="#2d4a2e"/></svg>
  <svg class="leaf-d l3" viewBox="0 0 200 300" fill="none"><path d="M100 0C60 40 10 80 10 160C10 240 60 280 100 300C140 280 190 240 190 160C190 80 140 40 100 0Z" fill="#2d4a2e"/></svg>
</div>

<div class="toast" id="toast"></div>
<div class="burn-backdrop" id="burn-backdrop"></div>
<div class="burn-overlay" id="burn-overlay"></div>

<header class="topbar">
  <a class="logo-wrap" href="#" onclick="nav('home');return false">
    <svg class="logo-svg" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="lg" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#2d4a2e"/><stop offset="100%" style="stop-color:#4a7c4f"/></linearGradient></defs>
      <rect x="25" y="45" width="50" height="40" rx="8" fill="url(#lg)"/>
      <path d="M35 45 V30 C35 20 45 15 50 15 C55 15 65 20 65 30 V45" stroke="#2d4a2e" stroke-width="8" fill="none" stroke-linecap="round"/>
      <circle cx="50" cy="60" r="6" fill="#c8e6c8"/>
      <rect x="47" y="60" width="6" height="12" rx="3" fill="#c8e6c8"/>
    </svg>
    <span class="logo-text">Locked<span>In</span></span>
  </a>
  <nav class="nav-tabs">
    <button class="nav-tab active" onclick="nav('home')"><span class="ti">üè†</span><span>Home</span></button>
    <button class="nav-tab" onclick="nav('videoroom')"><span class="ti">üìπ</span><span>Video</span></button>
    <button class="nav-tab" onclick="nav('textchat')"><span class="ti">üí¨</span><span>Chat</span></button>
    <button class="nav-tab" onclick="nav('flashcards')"><span class="ti">üÉè</span><span>Flashcards</span></button>
    <button class="nav-tab" onclick="nav('notes')"><span class="ti">üìù</span><span>Notes</span></button>
    <button class="nav-tab" onclick="nav('expenses')"><span class="ti">üí∞</span><span>Expenses</span></button>
    <button class="nav-tab" onclick="nav('deadlines')"><span class="ti">üìÖ</span><span>Deadlines</span></button>
    <button class="nav-tab" onclick="nav('worrybin')"><span class="ti">üî•</span><span>Worry Bin</span></button>
    <button class="nav-tab" onclick="nav('focusguard')"><span class="ti">üõ°Ô∏è</span><span>Focus</span></button>
  </nav>
  <div class="topbar-right">
    <button class="coffee-btn" onclick="window.open('https://buymeacoffee.com/Nexus.io','_blank')">‚òï Support</button>
  </div>
</header>

<div class="main">

<!-- HOME -->
<div class="section active" id="sec-home">
  <div style="text-align:center;max-width:650px;margin:50px auto">
    <div style="font-size:64px;margin-bottom:18px">üîê</div>
    <h1 style="font-family:'DM Serif Display',serif;font-size:42px;color:var(--green-deep);margin-bottom:14px">Welcome to LockedIn</h1>
    <p style="font-size:16px;color:var(--text-mid);line-height:1.7;margin-bottom:28px">The complete study productivity platform. All features fully working.</p>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:32px">
      <div class="card" style="cursor:pointer" onclick="nav('videoroom')"><div style="font-size:36px;margin-bottom:8px">üìπ</div><h3 style="color:var(--green-deep);font-size:16px;margin-bottom:6px">Video Rooms</h3><p class="text-light text-xs">Free unlimited calls</p></div>
      <div class="card" style="cursor:pointer" onclick="nav('flashcards')"><div style="font-size:36px;margin-bottom:8px">üÉè</div><h3 style="color:var(--green-deep);font-size:16px;margin-bottom:6px">Flashcards</h3><p class="text-light text-xs">Adaptive quiz system</p></div>
      <div class="card" style="cursor:pointer" onclick="nav('worrybin')"><div style="font-size:36px;margin-bottom:8px">üî•</div><h3 style="color:var(--green-deep);font-size:16px;margin-bottom:6px">Worry Bin</h3><p class="text-light text-xs">Burn your worries</p></div>
      <div class="card" style="cursor:pointer" onclick="nav('focusguard')"><div style="font-size:36px;margin-bottom:8px">üõ°Ô∏è</div><h3 style="color:var(--green-deep);font-size:16px;margin-bottom:6px">Focus Guard</h3><p class="text-light text-xs">AI distraction detection</p></div>
    </div>
  </div>
</div>

<!-- VIDEO ROOM -->
<div class="section" id="sec-videoroom">
  <div class="page-head"><div><h1>Video Room</h1><p>Unlimited free video calling powered by Jitsi Meet</p></div></div>
  <div id="video-setup"><div class="card" style="max-width:480px;margin:0 auto;text-align:center"><div style="font-size:48px;margin-bottom:14px">üìπ</div><h2 style="font-family:'DM Serif Display',serif;color:var(--green-deep);font-size:24px;margin-bottom:18px">Launch Video Room</h2><input class="inp" id="video-room-name" placeholder="Enter room name" style="margin-bottom:12px;text-align:center;font-weight:600"/><button class="btn btn-green" style="width:100%;justify-content:center" onclick="startJitsi()">üöÄ Start Video Call</button></div></div>
  <div id="video-active" class="hidden"><div class="room-code-banner"><div class="rcb-code"><span id="active-room-code"></span><button onclick="copyRoomCode()">üìã</button></div></div><iframe id="jitsi-iframe" class="jitsi-frame" allow="camera;microphone;fullscreen;display-capture;autoplay;clipboard-write" allowfullscreen></iframe><div style="text-align:center;margin-top:12px"><button class="btn btn-danger" onclick="endJitsi()">üìû Leave Room</button></div></div>
</div>

<!-- TEXT CHAT -->
<div class="section" id="sec-textchat">
  <div class="page-head"><div><h1>Text Chat</h1><p>Instant peer-to-peer messaging</p></div></div>
  <div class="chat-layout">
    <div>
      <div id="chat-setup"><div class="card"><div style="font-size:40px;text-align:center;margin-bottom:14px">üí¨</div><div class="card-sm" style="background:var(--green-wash);margin-bottom:12px"><input class="inp" id="chat-room-name" placeholder="Room name" style="margin-bottom:8px"/><input class="inp" id="chat-your-name" placeholder="Your name" style="margin-bottom:8px"/><button class="btn btn-green btn-sm" style="width:100%;justify-content:center" onclick="createChat()">Create Room</button></div><div style="text-align:center;margin:10px 0;font-size:11px;color:var(--text-light)">‚Äî OR ‚Äî</div><div class="card-sm"><input class="inp" id="chat-join-code" placeholder="Room code" style="margin-bottom:8px;text-transform:uppercase"/><input class="inp" id="chat-join-name" placeholder="Your name" style="margin-bottom:8px"/><button class="btn btn-outline btn-sm" style="width:100%;justify-content:center" onclick="joinChat()">Join Room</button></div></div></div>
      <div id="chat-active" class="hidden"><div class="card"><div class="flex-between mb-8"><div style="font-weight:600;color:var(--green-deep)" id="chat-room-title">Chat Room</div><button class="btn btn-danger btn-sm" onclick="leaveChat()">Leave</button></div><div class="chat-area" id="chat-messages"></div><div class="chat-row"><input class="inp" id="chat-message-input" placeholder="Message..." onkeydown="if(event.key==='Enter'){sendChatMsg();event.preventDefault()}"/><button class="btn btn-green btn-sm" onclick="sendChatMsg()">Send</button></div></div></div>
    </div>
    <div><div class="timer-card"><div style="font-size:11px;color:var(--text-light);margin-bottom:6px">FOCUS TIMER</div><div class="timer-display" id="timer-display">25:00</div><div class="timer-modes"><button class="timer-mode active" onclick="setTimerMode(25,this)">Focus</button><button class="timer-mode" onclick="setTimerMode(5,this)">Short</button><button class="timer-mode" onclick="setTimerMode(15,this)">Long</button></div><div class="flex gap-8 mt-12" style="justify-content:center"><button class="btn btn-green btn-sm" id="timer-btn" onclick="toggleTimer()">‚ñ∂ Start</button><button class="btn btn-outline btn-sm" onclick="resetTimer()">‚Ü∫</button></div><input class="inp mt-12" id="timer-goal" placeholder="Study goal..." style="font-size:11.5px"/></div><div class="card card-sm mt-12"><div class="fw6 text-xs text-mid mb-6">Today's Stats</div><div class="flex-between text-sm"><span class="text-light">Sessions</span><span id="sessions-today">0</span></div><div class="flex-between text-sm mt-6"><span class="text-light">Focus time</span><span id="focus-time-today">0 min</span></div></div></div>
  </div>
</div>

<!-- FLASHCARDS -->
<div class="section" id="sec-flashcards">
  <div class="page-head"><div><h1>Flashcards</h1><p>Smart adaptive quiz system</p></div><button class="btn btn-green btn-sm" onclick="openDeckModal()">+ New Deck</button></div>
  <div class="flash-layout">
    <div class="deck-list" id="deck-list"></div>
    <div id="flash-main"><div class="card" style="text-align:center;padding:60px 20px"><div style="font-size:42px;margin-bottom:12px">üÉè</div><p class="text-light">Create or select a deck</p></div></div>
  </div>
</div>

<!-- NOTES -->
<div class="section" id="sec-notes">
  <div class="page-head"><div><h1>Notes</h1><p>Rich text editor with auto-save</p></div><button class="btn btn-green btn-sm" onclick="createNote()">+ New Note</button></div>
  <div class="notes-layout">
    <div style="display:flex;flex-direction:column;gap:5px" id="notes-list"></div>
    <div class="note-editor">
      <div id="note-top" class="flex-between hidden"><input class="inp" id="note-title-inp" placeholder="Title" style="max-width:200px" oninput="saveNote()"/><div class="flex gap-6"><button class="btn btn-outline btn-sm" onclick="exportNote()">‚¨á Save</button><button class="btn btn-danger btn-sm" onclick="deleteNote()">üóë</button></div></div>
      <div class="toolbar hidden" id="note-toolbar"><button onclick="ex('bold')"><b>B</b></button><button onclick="ex('italic')"><i>I</i></button><button onclick="ex('underline')"><u>U</u></button><button onclick="ex('insertUnorderedList')">‚ò∞</button></div>
      <div class="note-body hidden" id="note-body" contenteditable="true" data-placeholder="Start writing..." oninput="saveNote()"></div>
      <div id="note-ph" class="card" style="text-align:center;padding:60px 20px"><div style="font-size:42px;margin-bottom:12px">üìù</div><p class="text-light">Create or select a note</p></div>
    </div>
  </div>
</div>

<!-- EXPENSES -->
<div class="section" id="sec-expenses">
  <div class="page-head"><div><h1>Expenses</h1><p>Track spending & budgets</p></div></div>
  <div class="expense-layout">
    <div><div class="card"><div class="fw6 text-xs text-mid mb-8">Add Transaction</div><div style="display:flex;flex-direction:column;gap:7px"><div class="flex gap-8"><input class="inp" id="exp-desc" placeholder="Description"/><input class="inp" id="exp-amt" type="number" placeholder="Amount" style="width:100px"/></div><select class="inp" id="exp-type"><option value="expense">Expense</option><option value="income">Income</option></select><button class="btn btn-green btn-sm" onclick="addExp()">+ Add</button></div></div><div class="card mt-12"><div class="fw6 text-xs text-mid mb-6">üíµ Budget</div><div class="flex gap-8"><input class="inp" id="bud-inp" type="number" placeholder="Monthly budget"/><button class="btn btn-outline btn-sm" onclick="setBud()">Set</button></div><div class="mt-8"><div class="flex-between text-xs text-light"><span>$<span id="bud-spent">0</span></span><span>$<span id="bud-total">0</span></span></div><div class="bud-bar-bg"><div class="bud-bar-fill ok" id="bud-bar" style="width:0%"></div></div></div></div></div>
    <div><div class="stat-grid"><div class="stat-box"><div class="stat-val" style="color:var(--terracotta)" id="s-exp">$0</div><div class="stat-lbl">Expenses</div></div><div class="stat-box"><div class="stat-val" style="color:var(--green-mid)" id="s-inc">$0</div><div class="stat-lbl">Income</div></div><div class="stat-box"><div class="stat-val" style="color:var(--green-deep)" id="s-bal">$0</div><div class="stat-lbl">Balance</div></div><div class="stat-box"><div class="stat-val" style="color:var(--gold)" id="s-avg">$0</div><div class="stat-lbl">Avg/Day</div></div></div><div class="card card-sm mt-12"><div class="flex-between mb-6"><span class="fw6 text-xs text-mid">Transactions</span><button class="btn btn-danger btn-sm" onclick="clearExp()">Clear</button></div><div class="exp-list" id="exp-list"></div></div></div>
  </div>
</div>

<!-- DEADLINES -->
<div class="section" id="sec-deadlines">
  <div class="page-head"><div><h1>Deadlines</h1><p>Track assignments & projects</p></div></div>
  <div class="dl-layout">
    <div><div class="dl-list" id="dl-list"></div></div>
    <div><div class="card"><div class="fw6 text-xs text-mid mb-8">üìå New Task</div><div style="display:flex;flex-direction:column;gap:7px"><input class="inp" id="dl-title" placeholder="Task name"/><input class="inp" id="dl-date" type="date"/><div class="text-xs text-light mb-4">Priority</div><div class="pri-row"><button class="pri-btn active low" onclick="setPri('low',this)">Low</button><button class="pri-btn med" onclick="setPri('med',this)">Med</button><button class="pri-btn hi" onclick="setPri('hi',this)">High</button></div><button class="btn btn-green btn-sm mt-8" onclick="addDL()">+ Add</button></div></div><div class="card card-sm mt-12"><div class="fw6 text-xs text-mid mb-6">Overview</div><div class="flex-between text-sm"><span class="text-light">Total</span><span id="dl-total">0</span></div><div class="flex-between text-sm mt-6"><span class="text-light">Done</span><span style="color:var(--green-mid)" id="dl-done">0</span></div><div class="flex-between text-sm mt-6"><span class="text-light">Pending</span><span style="color:var(--gold)" id="dl-pend">0</span></div></div></div>
  </div>
</div>

<!-- WORRY BIN -->
<div class="section" id="sec-worrybin">
  <div class="page-head"><div><h1>Worry Bin</h1><p>Write it down, let it go, burn it away</p></div></div>
  <div class="worry-layout">
    <div><div class="card"><div class="worry-tags" id="worry-tags"><button class="worry-tag active" onclick="selWorryTag(this,'All')">All</button><button class="worry-tag" onclick="selWorryTag(this,'Guilt')">Guilt</button><button class="worry-tag" onclick="selWorryTag(this,'Stress')">Stress</button><button class="worry-tag" onclick="selWorryTag(this,'Fear')">Fear</button></div><textarea class="worry-textarea mt-8" id="worry-inp" placeholder="Write what's weighing on you..."></textarea><div class="flex-between mt-8"><span class="text-xs text-light" id="worry-charcount">0 characters</span><button class="burn-btn" onclick="startBurn()">üî• Burn It</button></div></div><div class="card mt-12"><div class="flex-between mb-6"><span class="fw6 text-xs text-mid">üïØÔ∏è Burned</span><span class="text-xs text-light" id="burned-count">0</span></div><div class="burned-list" id="burned-list"></div></div></div>
    <div><div class="card"><div class="stat-grid"><div class="stat-box"><div class="stat-val" style="color:var(--terracotta)" id="ws-total">0</div><div class="stat-lbl">Burned</div></div><div class="stat-box"><div class="stat-val" style="color:var(--green-mid)" id="ws-streak">0</div><div class="stat-lbl">Streak</div></div></div></div></div>
  </div>
</div>

<!-- FOCUS GUARD -->
<div class="section" id="sec-focusguard">
  <div class="page-head"><div><h1>Focus Guard</h1><p>AI distraction detection system</p></div></div>
  <div class="fg-layout">
    <div><div class="fg-alert" id="fg-alert"><div>‚ö†Ô∏è</div><div><div style="font-size:11px;font-weight:600;color:var(--terracotta)" id="fg-alert-title">Focus lost!</div><div class="text-xs text-mid" id="fg-alert-sub">You switched tabs</div></div><button style="background:none;border:none;cursor:pointer;margin-left:auto" onclick="dismissAlert()">‚úï</button></div><div class="card"><div class="flex gap-12"><label class="fg-toggle"><input type="checkbox" id="fg-enabled" onchange="toggleFG()"/><span class="slider"></span></label><div><div style="font-size:13px;font-weight:600;color:var(--text-dark)">Focus Guard</div><div class="text-xs text-light">Monitors distractions</div></div></div></div><div class="card mt-12"><div class="fw6 text-xs text-mid mb-6">üìã Live Log</div><div class="fg-log" id="fg-log"></div></div></div>
    <div><div class="card"><div style="padding:16px 0;text-align:center"><div class="score-ring"><svg width="90" height="90" viewBox="0 0 90 90"><circle class="sr-bg" cx="45" cy="45" r="36"/><circle class="sr-fill" id="fg-ring-fill" cx="45" cy="45" r="36" stroke-dasharray="226" stroke-dashoffset="0"/></svg><div class="sr-num" id="fg-score-num">100</div></div><div class="text-xs text-light mt-8">Focus Score</div></div></div><div class="card card-sm mt-12"><div class="fw6 text-xs text-mid mb-6">Session Stats</div><div class="flex-between text-sm"><span class="text-light">Tab switches</span><span id="fg-stat-tabs">0</span></div><div class="flex-between text-sm mt-6"><span class="text-light">Distractions</span><span style="color:var(--terracotta)" id="fg-stat-total">0</span></div></div></div>
  </div>
</div>

<div class="social-footer">
  <a href="https://twitter.com/NahFel2n" target="_blank" class="social-link"><span>üê¶</span> @NahFel2n</a>
  <a href="https://instagram.com/wav.rn" target="_blank" class="social-link"><span>üì∏</span> @wav.rn</a>
  <a href="mailto:sociaro.io@gmail.com" class="social-link"><span>‚úâÔ∏è</span> Email</a>
  <a href="https://github.com/NahFel2n" target="_blank" class="social-link"><span>üêô</span> GitHub</a>
</div>
</div>

<div class="modal-ov" id="deck-modal"><div class="modal"><h3>New Deck</h3><input class="inp" id="deck-name-inp" placeholder="Deck name..." onkeydown="if(event.key==='Enter')createDeck()"/><div class="modal-acts"><button class="btn btn-outline btn-sm" onclick="closeDeckModal()">Cancel</button><button class="btn btn-green btn-sm" onclick="createDeck()">Create</button></div></div></div>

<script>
const S={get:(k,d)=>{try{return JSON.parse(localStorage.getItem('li_'+k))||d}catch{return d}},set:(k,v)=>localStorage.setItem('li_'+k,JSON.stringify(v))};
const esc=s=>{let d=document.createElement('div');d.textContent=s||'';return d.innerHTML};
function toast(m){let t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2200)}
function nav(p){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.querySelectorAll('.nav-tab').forEach(b=>b.classList.remove('active'));document.getElementById('sec-'+p).classList.add('active');const idx={home:0,videoroom:1,textchat:2,flashcards:3,notes:4,expenses:5,deadlines:6,worrybin:7,focusguard:8};const tabs=document.querySelectorAll('.nav-tab');if(tabs[idx[p]])tabs[idx[p]].classList.add('active');if(p==='flashcards')renderDecks();if(p==='notes')renderNotes();if(p==='expenses'){renderExp();updateExpStats()}if(p==='deadlines')renderDL();if(p==='worrybin')renderWorryBin();if(p==='focusguard')renderFGLog()}

// VIDEO
let currentRoom='';
function startJitsi(){let room=document.getElementById('video-room-name').value.trim()||'LockedIn'+Math.random().toString(36).substr(2,8);currentRoom=room;document.getElementById('active-room-code').textContent=room;document.getElementById('video-setup').classList.add('hidden');document.getElementById('video-active').classList.remove('hidden');document.getElementById('jitsi-iframe').src=`https://meet.jit.si/${encodeURIComponent(room)}#config.prejoinPageEnabled=false`;toast('üé• Room launched: '+room)}
function endJitsi(){document.getElementById('jitsi-iframe').src='';document.getElementById('video-setup').classList.remove('hidden');document.getElementById('video-active').classList.add('hidden');toast('Left room')}
function copyRoomCode(){navigator.clipboard.writeText(currentRoom).then(()=>toast('‚úÖ Code copied!')).catch(()=>toast('Could not copy'))}

// CHAT
let chatPeer=null,chatConns=[],chatMyName='',chatRoomCode='',chatMsgs=[];
function createChat(){chatMyName=document.getElementById('chat-your-name').value.trim();const roomName=document.getElementById('chat-room-name').value.trim();if(!chatMyName){toast('Enter your name');return}chatRoomCode=Math.random().toString(36).substr(2,7).toUpperCase();try{chatPeer=new Peer('li_'+chatRoomCode,{debug:0});chatPeer.on('open',()=>{showChatRoom(roomName||'Chat',chatRoomCode);addChatMsg('System','',`${chatMyName} created room`,true);toast('Room created: '+chatRoomCode)});chatPeer.on('connection',conn=>{chatConns.push(conn);conn.on('data',d=>handleChatData(d))})}catch(e){toast('Connection failed')}}
function joinChat(){chatRoomCode=document.getElementById('chat-join-code').value.trim().toUpperCase();chatMyName=document.getElementById('chat-join-name').value.trim();if(!chatRoomCode||!chatMyName){toast('Enter code & name');return}try{chatPeer=new Peer(null,{debug:0});chatPeer.on('open',()=>{const conn=chatPeer.connect('li_'+chatRoomCode);conn.on('open',()=>{chatConns.push(conn);conn.on('data',d=>handleChatData(d));broadcastChat({type:'msg',name:chatMyName,text:`${chatMyName} joined`});showChatRoom('Chat',chatRoomCode);toast('Joined!')})})}catch(e){toast('Failed to join')}}
function showChatRoom(name,code){document.getElementById('chat-setup').classList.add('hidden');document.getElementById('chat-active').classList.remove('hidden');document.getElementById('chat-room-title').textContent=name}
function leaveChat(){if(chatPeer){chatConns.forEach(c=>{try{c.close()}catch(e){}});chatPeer.destroy()}chatPeer=null;chatConns=[];chatMsgs=[];chatRoomCode='';document.getElementById('chat-setup').classList.remove('hidden');document.getElementById('chat-active').classList.add('hidden');document.getElementById('chat-messages').innerHTML='';toast('Left chat')}
function sendChatMsg(){const input=document.getElementById('chat-message-input'),text=input.value.trim();if(!text)return;input.value='';addChatMsg(chatMyName,'',text,true);broadcastChat({type:'msg',name:chatMyName,text:text})}
function handleChatData(d){if(d.type==='msg')addChatMsg(d.name,'',d.text,false)}
function broadcastChat(d){chatConns.forEach(c=>{try{c.send(d)}catch(e){}})}
function addChatMsg(name,av,text,isMe){const isSys=(name==='System');chatMsgs.push({name,text,isMe,isSys,time:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})});renderChat()}
function renderChat(){const el=document.getElementById('chat-messages');el.innerHTML=chatMsgs.map(m=>{if(m.isSys)return`<div style="text-align:center;padding:6px;font-size:10px;color:var(--text-light);font-style:italic">${esc(m.text)}</div>`;return`<div class="msg" style="${m.isMe?'flex-direction:row-reverse':''}"><div class="msg-av">${m.isMe?'üôã':'üë§'}</div><div style="max-width:75%">${!m.isMe?`<div class="sender">${esc(m.name)}</div>`:''}<div class="msg-bubble ${m.isMe?'mine':''}">${esc(m.text)}</div><div class="tm">${m.time}</div></div></div>`}).join('');el.scrollTop=el.scrollHeight}

// TIMER
let tRunning=false,tInterval=null,tMins=25,tSecs=0,tSessions=S.get('sessions',[]);
function setTimerMode(mins,btn){if(tRunning)return;document.querySelectorAll('.timer-mode').forEach(b=>b.classList.remove('active'));btn.classList.add('active');tMins=mins;tSecs=0;updateTimerDisp()}
function toggleTimer(){const btn=document.getElementById('timer-btn');if(tRunning){clearInterval(tInterval);tRunning=false;btn.textContent='‚ñ∂ Start';return}tRunning=true;btn.textContent='‚è∏ Pause';tInterval=setInterval(()=>{tSecs--;if(tSecs<0){tMins--;tSecs=59}if(tMins<0){clearInterval(tInterval);tRunning=false;btn.textContent='‚ñ∂ Start';const goal=document.getElementById('timer-goal').value||'Study';tSessions.push({goal:goal,date:new Date().toLocaleDateString(),duration:document.querySelector('.timer-mode.active').textContent.match(/\d+/)[0]});S.set('sessions',tSessions);updateSessionStats();tMins=0;tSecs=0;updateTimerDisp();toast('üéâ Timer complete!');return}updateTimerDisp()},1000)}
function resetTimer(){clearInterval(tInterval);tRunning=false;document.getElementById('timer-btn').textContent='‚ñ∂ Start';const activeMode=document.querySelector('.timer-mode.active');tMins=parseInt(activeMode.textContent.match(/\d+/)[0]);tSecs=0;updateTimerDisp()}
function updateTimerDisp(){document.getElementById('timer-display').textContent=String(tMins).padStart(2,'0')+':'+String(tSecs).padStart(2,'0')}
function updateSessionStats(){const today=new Date().toLocaleDateString(),todaySessions=tSessions.filter(s=>s.date===today);document.getElementById('sessions-today').textContent=todaySessions.length;const totalMins=todaySessions.reduce((sum,s)=>sum+parseInt(s.duration),0);document.getElementById('focus-time-today').textContent=totalMins+' min'}

// FLASHCARDS
let decks=S.get('decks',[]),aDeck=null,curCard=0;
function openDeckModal(){document.getElementById('deck-modal').classList.add('open');document.getElementById('deck-name-inp').value=''}
function closeDeckModal(){document.getElementById('deck-modal').classList.remove('open')}
function createDeck(){let n=document.getElementById('deck-name-inp').value.trim();if(!n)return;decks.push({id:Date.now(),name:n,cards:[]});S.set('decks',decks);closeDeckModal();renderDecks();activateDeck(decks.length-1);toast('Deck created!')}
function renderDecks(){document.getElementById('deck-list').innerHTML=decks.map((d,i)=>`<div class="deck-item ${aDeck===i?'active':''}" onclick="activateDeck(${i})"><div><div class="deck-name">${esc(d.name)}</div><div class="deck-count">${d.cards.length} cards</div></div><button class="btn btn-danger btn-sm" onclick="event.stopPropagation();deleteDeck(${i})">üóë</button></div>`).join('')}
function deleteDeck(i){if(!confirm('Delete?'))return;decks.splice(i,1);S.set('decks',decks);if(aDeck===i)aDeck=null;else if(aDeck>i)aDeck--;renderDecks();renderFlashMain()}
function activateDeck(i){aDeck=i;curCard=0;renderDecks();renderFlashMain()}
function renderFlashMain(){let el=document.getElementById('flash-main');if(aDeck===null){el.innerHTML=`<div class="card" style="text-align:center;padding:60px 20px"><div style="font-size:42px;margin-bottom:12px">üÉè</div><p class="text-light">Select a deck</p></div>`;return}let d=decks[aDeck];el.innerHTML=`<div class="flex-between mb-8"><span class="fw6">${esc(d.name)}</span><button class="btn btn-outline btn-sm" onclick="startQuiz()">üéØ Quiz</button></div>`+(d.cards.length>0?`<div class="card-flip-scene" onclick="flipCard()"><div class="card-flip" id="card-flip"><div class="card-face front"><div class="lbl">Question</div><div class="cnt" id="c-q">${esc(d.cards[curCard].q)}</div></div><div class="card-face back"><div class="lbl">Answer</div><div class="cnt" id="c-a">${esc(d.cards[curCard].a)}</div></div></div></div><p style="text-align:center;color:var(--text-light);font-size:11px;margin-top:8px">üëÜ Click to flip ¬∑ Card ${curCard+1}/${d.cards.length}</p><div class="flex gap-6 mt-8" style="justify-content:center"><button class="btn btn-outline btn-sm" onclick="navC(-1)">‚Üê Prev</button><button class="btn btn-outline btn-sm" onclick="navC(1)">Next ‚Üí</button></div>`:'')+`<div class="card mt-12"><div class="fw6 text-xs text-mid mb-6">+ Add Card</div><div class="flex gap-8 mb-6"><input class="inp" id="nq" placeholder="Question"/><input class="inp" id="na" placeholder="Answer"/></div><button class="btn btn-green btn-sm" onclick="addCard()">Add Card</button></div>`+(d.cards.length>0?`<div class="fw6 text-xs text-mid mt-12 mb-6">All Cards</div><div class="mini-cards">${d.cards.map((c,ci)=>`<div class="mini-card"><div class="mq">Q</div><div style="font-size:11.5px;color:var(--text-dark);margin-bottom:4px">${esc(c.q)}</div><div class="mq">A</div><div class="ma">${esc(c.a)}</div></div>`).join('')}</div>`:'')}
function flipCard(){document.getElementById('card-flip').classList.toggle('flipped')}
function navC(dir){let d=decks[aDeck];curCard=(curCard+dir+d.cards.length)%d.cards.length;document.getElementById('card-flip').classList.remove('flipped');document.getElementById('c-q').textContent=d.cards[curCard].q;document.getElementById('c-a').textContent=d.cards[curCard].a}
function addCard(){let q=document.getElementById('nq').value.trim(),a=document.getElementById('na').value.trim();if(!q||!a)return;decks[aDeck].cards.push({q,a});S.set('decks',decks);curCard=0;renderFlashMain();toast('Card added!')}
let qCards=[],qIdx=0,qScore=0;
function startQuiz(){let d=decks[aDeck];if(d.cards.length<2){toast('Need 2+ cards');return}qCards=[...d.cards].sort(()=>Math.random()-.5);qIdx=0;qScore=0;renderQuiz()}
function renderQuiz(){let el=document.getElementById('flash-main');if(qIdx>=qCards.length){let pct=Math.round((qScore/qCards.length)*100);el.innerHTML=`<div class="card" style="text-align:center;padding:40px 20px"><div style="font-size:48px">${pct>=80?'üéâ':'üìö'}</div><div style="font-family:'DM Serif Display',serif;font-size:32px;color:${pct>=80?'var(--green-mid)':'var(--terracotta)'};margin:10px 0">${pct}%</div><p class="text-light">${qScore}/${qCards.length} correct</p><div class="flex gap-8 mt-16" style="justify-content:center"><button class="btn btn-green btn-sm" onclick="startQuiz()">üîÑ Again</button><button class="btn btn-outline btn-sm" onclick="renderFlashMain()">‚Üê Back</button></div></div>`;return}let c=qCards[qIdx],d=decks[aDeck];let others=d.cards.filter(x=>x.a!==c.a).map(x=>x.a);while(others.length<3)others.push('None');let opts=[c.a,...others.slice(0,3)].sort(()=>Math.random()-.5);el.innerHTML=`<div class="card" style="text-align:center;padding:28px"><div class="text-xs text-light">Q${qIdx+1}/${qCards.length} ¬∑ Score:${qScore}</div><div style="font-family:'DM Serif Display',serif;font-size:20px;color:var(--green-deep);margin:12px 0">${esc(c.q)}</div><div class="quiz-opts">${opts.map((o,oi)=>`<button class="quiz-opt" onclick="selAns(${oi},'${esc(c.a).replace(/'/g,"\\'")}');">${esc(o)}</button>`).join('')}</div></div>`}
function selAns(idx,correct){let btns=document.querySelectorAll('.quiz-opt'),sel=btns[idx].textContent;btns.forEach(b=>b.disabled=true);if(sel===correct){btns[idx].classList.add('correct');qScore++}else{btns[idx].classList.add('wrong');btns.forEach(b=>{if(b.textContent===correct)b.classList.add('correct')})}setTimeout(()=>{qIdx++;renderQuiz()},1000)}

// NOTES
let notes=S.get('notes',[]),aNote=null;
function createNote(){notes.unshift({id:Date.now(),title:'Untitled',content:'',date:new Date().toLocaleDateString()});S.set('notes',notes);renderNotes();activateNote(0);toast('Note created!')}
function renderNotes(){document.getElementById('notes-list').innerHTML=notes.map((n,i)=>`<div class="note-item ${aNote===i?'active':''}" onclick="activateNote(${i})"><div class="note-title">${esc(n.title)}</div><div class="note-meta">${n.date}</div></div>`).join('')}
function activateNote(i){aNote=i;let n=notes[i];document.getElementById('note-top').classList.remove('hidden');document.getElementById('note-toolbar').classList.remove('hidden');document.getElementById('note-body').classList.remove('hidden');document.getElementById('note-ph').style.display='none';document.getElementById('note-title-inp').value=n.title;document.getElementById('note-body').innerHTML=n.content;renderNotes()}
function saveNote(){if(aNote===null)return;notes[aNote].title=document.getElementById('note-title-inp').value||'Untitled';notes[aNote].content=document.getElementById('note-body').innerHTML;S.set('notes',notes);renderNotes()}
function deleteNote(){if(aNote===null||!confirm('Delete?'))return;notes.splice(aNote,1);S.set('notes',notes);aNote=null;['note-top','note-toolbar','note-body'].forEach(id=>document.getElementById(id).classList.add('hidden'));document.getElementById('note-ph').style.display='flex';renderNotes();toast('Deleted')}
function ex(cmd){document.execCommand(cmd,false,null);document.getElementById('note-body').focus()}
function exportNote(){if(aNote===null)return;let n=notes[aNote],tmp=document.createElement('div');tmp.innerHTML=n.content;let blob=new Blob([`${n.title}\n\n${tmp.innerText}`],{type:'text/plain'}),a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=n.title+'.txt';a.click();toast('Saved!')}

// EXPENSES
let expenses=S.get('expenses',[]),budget=S.get('budget',0);
function addExp(){let desc=document.getElementById('exp-desc').value.trim(),amt=parseFloat(document.getElementById('exp-amt').value),type=document.getElementById('exp-type').value;if(!desc||isNaN(amt)||amt<=0)return;expenses.unshift({id:Date.now(),desc,amount:amt,type,date:new Date().toLocaleDateString()});S.set('expenses',expenses);document.getElementById('exp-desc').value='';document.getElementById('exp-amt').value='';renderExp();updateExpStats();toast('Added!')}
function renderExp(){document.getElementById('exp-list').innerHTML=expenses.slice(0,20).map((e,i)=>`<div class="exp-item"><div><div style="font-size:12px;font-weight:600;color:var(--text-dark)">${esc(e.desc)}</div><div style="font-size:10px;color:var(--text-light)">${e.date}</div></div><div class="flex gap-6"><div class="exp-amt ${e.type==='income'?'inc':''}">${e.type==='income'?'+':'-'}$${e.amount.toFixed(2)}</div><button class="btn btn-danger btn-sm" onclick="delExp(${i})">üóë</button></div></div>`).join('')||'<div class="text-xs text-light" style="text-align:center;padding:12px">No transactions</div>'}
function delExp(i){expenses.splice(i,1);S.set('expenses',expenses);renderExp();updateExpStats()}
function clearExp(){if(!confirm('Clear all?'))return;expenses=[];S.set('expenses',expenses);renderExp();updateExpStats()}
function updateExpStats(){let tE=expenses.filter(e=>e.type==='expense').reduce((a,e)=>a+e.amount,0),tI=expenses.filter(e=>e.type==='income').reduce((a,e)=>a+e.amount,0),bal=tI-tE,dates=[...new Set(expenses.map(e=>e.date))],avg=dates.length?tE/dates.length:0;document.getElementById('s-exp').textContent='$'+tE.toFixed(2);document.getElementById('s-inc').textContent='$'+tI.toFixed(2);document.getElementById('s-bal').textContent=(bal<0?'-':'')+'$'+Math.abs(bal).toFixed(2);document.getElementById('s-avg').textContent='$'+avg.toFixed(2);document.getElementById('bud-spent').textContent=tE.toFixed(2);document.getElementById('bud-total').textContent=budget.toFixed(2);let pct=budget>0?Math.min(100,(tE/budget)*100):0,bar=document.getElementById('bud-bar');bar.style.width=pct+'%';bar.className='bud-bar-fill '+(pct>90?'danger':pct>70?'warn':'ok')}
function setBud(){let v=parseFloat(document.getElementById('bud-inp').value);if(!isNaN(v)&&v>0){budget=v;S.set('budget',budget);updateExpStats();toast('Budget set!')}}

// DEADLINES
let deadlines=S.get('deadlines',[]),selPri='low';
function setPri(v,btn){selPri=v;document.querySelectorAll('.pri-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active')}
function addDL(){let t=document.getElementById('dl-title').value.trim(),d=document.getElementById('dl-date').value;if(!t||!d){toast('Fill title & date');return}deadlines.push({id:Date.now(),title:t,date:d,priority:selPri,done:false});S.set('deadlines',deadlines);document.getElementById('dl-title').value='';document.getElementById('dl-date').value='';renderDL();toast('Task added!')}
function renderDL(){let today=new Date();today.setHours(0,0,0,0);let sorted=[...deadlines].sort((a,b)=>new Date(a.date)-new Date(b.date));document.getElementById('dl-list').innerHTML=sorted.map(d=>{let ri=deadlines.indexOf(d),due=new Date(d.date+'T00:00:00'),diff=Math.ceil((due-today)/864e5),urg=d.done?'done':diff<0?'urgent':diff<=2?'warning':'ok',txt=d.done?'Done ‚úì':diff<0?`${-diff}d late`:diff===0?'Today':diff===1?'Tomorrow':diff+'d';return`<div class="dl-item ${urg} ${d.done?'done':''}"><div><div class="dl-title">${esc(d.title)}</div><div class="dl-sub">${d.date}¬∑${d.priority}</div></div><div class="flex gap-6"><span class="dl-days ${urg}">${txt}</span><button class="btn btn-outline btn-sm" onclick="togDL(${ri})">${d.done?'‚Ü©':'‚úì'}</button><button class="btn btn-danger btn-sm" onclick="delDL(${ri})">üóë</button></div></div>`}).join('')||'<div class="card" style="text-align:center;padding:40px"><p class="text-light">No tasks</p></div>';let pend=deadlines.filter(d=>!d.done);document.getElementById('dl-total').textContent=deadlines.length;document.getElementById('dl-done').textContent=deadlines.filter(d=>d.done).length;document.getElementById('dl-pend').textContent=pend.length}
function togDL(i){deadlines[i].done=!deadlines[i].done;S.set('deadlines',deadlines);renderDL()}
function delDL(i){deadlines.splice(i,1);S.set('deadlines',deadlines);renderDL()}

// WORRY BIN
let worries=S.get('worries',[]),selTag='All';
document.getElementById('worry-inp').addEventListener('input',()=>{document.getElementById('worry-charcount').textContent=document.getElementById('worry-inp').value.length+' characters'});
function selWorryTag(btn,tag){selTag=tag;document.querySelectorAll('.worry-tag').forEach(b=>b.classList.remove('active'));btn.classList.add('active')}
function startBurn(){let txt=document.getElementById('worry-inp').value.trim();if(!txt){toast('Write something');return}document.getElementById('burn-backdrop').classList.add('active');let ov=document.getElementById('burn-overlay');ov.classList.add('active');ov.innerHTML=`<div class="burn-paper" id="burn-paper"><div class="bp-text" style="font-size:14px;color:var(--text-dark);line-height:1.6">${esc(txt)}</div>${selTag!=='All'?`<div style="display:inline-block;margin-top:8px;padding:3px 9px;border-radius:12px;background:rgba(196,113,74,.1);color:var(--terracotta);font-size:10px;font-weight:600">${selTag}</div>`:''}</div><button class="burn-btn" style="margin-top:18px" onclick="confirmBurn()">üî• Burn It</button>`;let paper=document.getElementById('burn-paper');setTimeout(()=>{paper.classList.add('shaking')},100);setTimeout(()=>{paper.classList.remove('shaking')},400)}
function confirmBurn(){let paper=document.getElementById('burn-paper'),ov=document.getElementById('burn-overlay');paper.classList.add('burning');let glow=document.createElement('div');glow.className='fire-glow active';paper.appendChild(glow);for(let i=0;i<25;i++){let p=document.createElement('div');p.className='fire-particle';p.style.cssText=`left:${50+Math.random()*20-10}%;top:${50+Math.random()*20-10}%;width:${4+Math.random()*6}px;height:${4+Math.random()*6}px;background:${['#ff6600','#ff9900','#ffaa00','#ff4400'][Math.floor(Math.random()*4)]};--dur:${.8+Math.random()*.8}s;--tx:${(Math.random()-.5)*200}px;--ty:${(Math.random()-.5)*200}px`;paper.appendChild(p);setTimeout(()=>p.classList.add('active'),Math.random()*300)}for(let i=0;i<15;i++){let e=document.createElement('div');e.className='ember';e.style.cssText=`left:${50+Math.random()*10-5}%;top:${50+Math.random()*10-5}%;--edur:${1.2+Math.random()}s;--ex:${(Math.random()-.5)*150}px;--ey:${-50-Math.random()*100}px`;paper.appendChild(e);setTimeout(()=>e.classList.add('active'),400+Math.random()*400)}for(let i=0;i<8;i++){let s=document.createElement('div');s.className='smoke';s.style.cssText=`left:50%;top:40%;width:${40+Math.random()*40}px;height:${40+Math.random()*40}px;--sdur:${1.5+Math.random()*.8}s`;paper.appendChild(s);setTimeout(()=>s.classList.add('active'),600+Math.random()*300)}for(let i=0;i<12;i++){let a=document.createElement('div');a.className='ash-particle';a.style.cssText=`left:${50+Math.random()*30-15}%;top:${60}%;--adur:${1+Math.random()*.8}s;--ax:${(Math.random()-.5)*80}px;--ay:${80+Math.random()*60}px;--ar:${Math.random()*360}deg`;paper.appendChild(a);setTimeout(()=>a.classList.add('active'),1200+Math.random()*300)}let txt=document.getElementById('worry-inp').value.trim();worries.unshift({text:txt,tag:selTag==='All'?'Other':selTag,date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})});S.set('worries',worries);setTimeout(()=>{document.getElementById('burn-backdrop').classList.remove('active');ov.classList.remove('active');document.getElementById('worry-inp').value='';document.getElementById('worry-charcount').textContent='0 characters';renderWorryBin();toast('üî• Burned away!')},2400)}
function renderWorryBin(){document.getElementById('burned-count').textContent=worries.length+' worries';document.getElementById('ws-total').textContent=worries.length;document.getElementById('ws-streak').textContent=worries.some(w=>w.date===new Date().toLocaleDateString())?1:0;document.getElementById('burned-list').innerHTML=worries.slice(0,15).map(w=>`<div class="burned-item"><div class="bi-left"><div><div class="bi-text">${esc(w.text)}</div><span style="font-size:10px;padding:2px 6px;border-radius:4px;background:rgba(196,113,74,.08);color:var(--terracotta)">${esc(w.tag)}</span></div></div><div style="font-size:9px;color:var(--text-light)">${w.time}</div></div>`).join('')||'<div class="text-xs text-light" style="text-align:center;padding:10px">Nothing burned yet</div>'}

// FOCUS GUARD
let fgEnabled=false,fgLog=[],fgScore=100,fgStats={tabs:0,total:0};
function toggleFG(){fgEnabled=document.getElementById('fg-enabled').checked;if(fgEnabled){fgScore=100;fgStats={tabs:0,total:0};fgLog=[];updateFGUI();toast('üõ°Ô∏è Focus Guard activated')}else toast('Focus Guard paused')}
document.addEventListener('visibilitychange',()=>{if(!fgEnabled||document.hidden)return;logFG('You switched tabs','‚áÑ Tab Switch','warning');fgStats.tabs++;fgStats.total++;fgScore=Math.max(0,fgScore-8);updateFGUI();showAlert('Tab Switch','You switched to another tab')});
function logFG(detail,label,severity){fgLog.unshift({detail,label,severity,time:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})});if(fgLog.length>30)fgLog.pop();renderFGLog()}
function renderFGLog(){document.getElementById('fg-log').innerHTML=fgLog.map(item=>`<div class="fg-log-item ${item.severity}"><div>${item.severity==='critical'?'üö®':'‚ö†Ô∏è'}</div><div><div style="font-size:10.5px;font-weight:600">${esc(item.label)}</div><div style="font-size:9px;color:var(--text-light)">${esc(item.detail)}</div></div><div style="font-size:9px;color:var(--text-light);margin-left:auto">${item.time}</div></div>`).join('')||'<div class="text-xs text-light" style="text-align:center;padding:10px">No events yet</div>';document.getElementById('fg-stat-tabs').textContent=fgStats.tabs;document.getElementById('fg-stat-total').textContent=fgStats.total}
function updateFGUI(){let circ=226,offset=circ*(1-fgScore/100),fill=document.getElementById('fg-ring-fill');fill.style.strokeDashoffset=offset;fill.style.stroke=fgScore>=70?'var(--green-mid)':fgScore>=40?'var(--gold)':'var(--terracotta)';document.getElementById('fg-score-num').textContent=Math.round(fgScore);document.getElementById('fg-score-num').style.color=fgScore>=70?'var(--green-deep)':fgScore>=40?'var(--gold)':'var(--terracotta)'}
function showAlert(title,sub){document.getElementById('fg-alert-title').textContent=title;document.getElementById('fg-alert-sub').textContent=sub;let al=document.getElementById('fg-alert');al.classList.remove('show');void al.offsetWidth;al.classList.add('show');setTimeout(()=>al.classList.remove('show'),3500)}
function dismissAlert(){document.getElementById('fg-alert').classList.remove('show')}

// INIT
document.getElementById('dl-date').value=new Date().toISOString().split('T')[0];
updateSessionStats();
</script>
</body>
</html>
